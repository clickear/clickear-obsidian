
# 分布式算法种类
![算法](http://image.clickear.top/20220126203536.png)
## [[拜占庭容错]] 
一般而言，在可信环境（比如企业内网）中，系统具有故障容错能力就可以了，常见的算法有二阶段提交协议（2PC）、TCC（Try-Confirm-Cancel）、Paxos 算法、ZAB 协议、Raft 算法、Gossip 协议、Quorum NWR 算法。而在不可信的环境（比如有人做恶）中，这时系统需要具备拜占庭容错能力，
常见的拜占庭容错算法有 POW 算法、PBFT 算法。

## [[一致性]]
在 CAP 定理中，CAP 中的强一致性（也就是 C）是指原子一致性（也就是线性一致性）。其中，[[Paxos]]、[[Raft]] 能实现线性一致性，而 ZooKeeper 基于读性能的考虑，它通过 [[ZAB]] 协议提供的是[[最终一致性]]

在需要[[一致性#ACID中的一致性 系统状态的一致性 |系统状态的一致性]]时，你可以考虑采用二阶段提交协议([[2PC]])、[[TCC]]。在需要数据访问是的强一致性时，你可考虑 [[Raft]] 算法。在可用性优先的系统，你可以采用 Gossip 协议来实现最终一致性，并实现 Quorum NWR 来提供强一致性。

## [[可用性]]:
可用性说的是任何来自客户端的请求，不管访问哪个非故障节点，都能得到响应数据，但不保证是同一份最新数据，可用性强调的是服务可用。
一般来讲，采用 [[Gossip]] 协议实现最终一致性系统，它的可用性是最高的，因为哪怕只有一个节点，集群还能在运行并提供服务。其次是 [[Paxos]] 算法、[[ZAB]] 协议、[[Raft]] 算法、[[Quorum NWR]] 算法、[[PBFT]] 算法、[[POW]] 算法，它们能容忍一定数节点故障。
最后是二阶段提交协议、TCC，只有当所有节点都在运行时，才能工作，可用性最低。


## 性能
一般来讲，采用 Gossip 协议的 [[AP]] 型分布式系统，具备水平扩展能力，读写性能是最高的。
其次是 Paxos 算法、ZAB 协议、Raft 算法，因为它们都是[[领导者模型]]，写性能受限于领导者，读性能取决于一致性实现。
最后是二阶段提交协议和 [[TCC]]，因为在实现事务时，需要预留和锁定资源，性能相对低。



## 分布式一致性
## 弱一致性模型
+ DNS
+ [[Gossip]]
## 强一致性模型
主要思路，是全部节点都需要同意，还是多半即可(多数派模型)
+ 同步
>1. MYSQL的主从复制模型，同步复制，即从节点写入成功才算成功。
>2. 异步复制，即
>3. 2PC/3PC/TCC等
+ [[Paxos]]
+ [[Raft]](multi paxos)
+ [[ZAB]](multi paxos的变种)


